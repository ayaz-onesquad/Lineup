---
phase: 01-foundation-fixes
plan: 03
type: execute
wave: 2
depends_on: [01-01, 01-02]
files_modified:
  - src/components/forms/ClientForm.tsx
  - src/lib/utils.ts
autonomous: true

must_haves:
  truths:
    - "ClientForm has Name and Status fields side-by-side in top row"
    - "ClientForm has Industry and Location fields side-by-side in middle row"
    - "ClientForm has Overview as full-width textarea at bottom"
    - "Industry is a required searchable dropdown with predefined options"
    - "Industry allows 'Other' selection with custom text entry"
    - "Location is an optional text field with format hint"
  artifacts:
    - path: "src/components/forms/ClientForm.tsx"
      provides: "Client creation form with all required fields"
      min_lines: 200
    - path: "src/lib/utils.ts"
      provides: "Industry options including agency-relevant industries"
      contains: "INDUSTRY_OPTIONS"
  key_links:
    - from: "src/components/forms/ClientForm.tsx"
      to: "src/lib/utils.ts"
      via: "INDUSTRY_OPTIONS import"
      pattern: "import.*INDUSTRY_OPTIONS"
    - from: "src/components/forms/ClientForm.tsx"
      to: "src/components/ui/searchable-select.tsx"
      via: "SearchableSelect component"
      pattern: "SearchableSelect"
---

<objective>
Update ClientForm with the complete field layout per phase context decisions: Name/Status top row, Industry/Location middle row, Overview bottom.

Purpose: Users need to create clients with complete information including industry classification and location. The form layout should be logical and match existing codebase patterns.

Output: Updated ClientForm.tsx with proper layout and Industry field with "Other" option support.
</objective>

<execution_context>
@/Users/ayazmohammed/.claude/get-shit-done/workflows/execute-plan.md
@/Users/ayazmohammed/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-fixes/01-CONTEXT.md
@src/components/forms/ClientForm.tsx
@src/lib/utils.ts
@src/components/ui/searchable-select.tsx
@src/types/database.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update INDUSTRY_OPTIONS in utils.ts for agency focus</name>
  <files>src/lib/utils.ts</files>
  <action>
Update the INDUSTRY_OPTIONS in src/lib/utils.ts to include agency-relevant industries per the context decisions.

Replace the current INDUSTRY_OPTIONS with:
```typescript
// Industry options for dropdown - focused on agency clients
export const INDUSTRY_OPTIONS = [
  { value: 'saas', label: 'SaaS' },
  { value: 'ecommerce', label: 'E-commerce' },
  { value: 'healthcare', label: 'Healthcare' },
  { value: 'fintech', label: 'Fintech' },
  { value: 'real_estate', label: 'Real Estate' },
  { value: 'education', label: 'Education' },
  { value: 'technology', label: 'Technology' },
  { value: 'finance', label: 'Finance' },
  { value: 'retail', label: 'Retail' },
  { value: 'manufacturing', label: 'Manufacturing' },
  { value: 'media', label: 'Media & Entertainment' },
  { value: 'hospitality', label: 'Hospitality' },
  { value: 'consulting', label: 'Consulting' },
  { value: 'legal', label: 'Legal' },
  { value: 'non_profit', label: 'Non-Profit' },
  { value: 'government', label: 'Government' },
  { value: 'other', label: 'Other' },
] as const
```

Also update the IndustryType in src/types/database.ts to include 'saas', 'ecommerce', 'fintech' if not already present.
  </action>
  <verify>
Read src/lib/utils.ts and verify INDUSTRY_OPTIONS includes SaaS, E-commerce, Fintech, and Other.
  </verify>
  <done>
INDUSTRY_OPTIONS updated with agency-relevant industries including SaaS, E-commerce, Fintech, and Other option.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update ClientForm layout and add Status field</name>
  <files>src/components/forms/ClientForm.tsx</files>
  <action>
Restructure ClientForm.tsx to match the context decisions:

1. **Update Zod schema:**
   - Add `status` field with default 'active'
   - Make `industry` required (remove .optional())
   - Add `industry_other` field for custom industry text when "other" is selected

2. **Layout restructure (remove Primary Contact section for now - that's Phase 2):**

   **Top Row (grid-cols-2):**
   - Name (required)
   - Status (dropdown: active/inactive)

   **Middle Row (grid-cols-2):**
   - Industry (required, searchable select)
   - Location (optional, text input with placeholder "City, Country")

   **Conditional Row (if industry === 'other'):**
   - Industry Other (text input for custom industry)

   **Bottom:**
   - Overview (full-width textarea)

   **Settings Section:**
   - Portal Enabled toggle (keep existing)

3. **Remove Primary Contact section** - this will be added in Phase 2 when Contacts subsystem is built. Keep the form focused on client fields only.

4. **Update form submission:**
   - Include status field
   - Handle industry_other: if industry is 'other', store the custom value

Key code structure:
```tsx
<div className="space-y-4">
  {/* Top Row: Name and Status */}
  <div className="grid grid-cols-2 gap-4">
    {/* Name field */}
    {/* Status field - use Select component */}
  </div>

  {/* Middle Row: Industry and Location */}
  <div className="grid grid-cols-2 gap-4">
    {/* Industry field - SearchableSelect, required */}
    {/* Location field - Input with placeholder */}
  </div>

  {/* Conditional: Other Industry */}
  {watchIndustry === 'other' && (
    {/* Industry Other text input */}
  )}

  {/* Overview - full width */}
  {/* Overview textarea */}

  {/* Portal Settings */}
  {/* Portal enabled toggle */}
</div>
```

Use `form.watch('industry')` to conditionally show the "Other" text field.
  </action>
  <verify>
Read src/components/forms/ClientForm.tsx and verify:
- Grid layout with Name/Status top row
- Grid layout with Industry/Location middle row
- Industry is required field
- Conditional "Other" industry text field
- Overview is full-width at bottom
- No Primary Contact section (deferred to Phase 2)
  </verify>
  <done>
ClientForm has proper layout with Name/Status, Industry/Location rows, conditional Other industry field, and Overview textarea.
  </done>
</task>

<task type="auto">
  <name>Task 3: Update IndustryType in database.ts</name>
  <files>src/types/database.ts</files>
  <action>
Update the IndustryType in src/types/database.ts to include the new agency-relevant industry types:

```typescript
export type IndustryType =
  | 'saas'
  | 'ecommerce'
  | 'healthcare'
  | 'fintech'
  | 'real_estate'
  | 'education'
  | 'technology'
  | 'finance'
  | 'retail'
  | 'manufacturing'
  | 'media'
  | 'hospitality'
  | 'consulting'
  | 'legal'
  | 'non_profit'
  | 'government'
  | 'other'
```

This ensures TypeScript type safety matches the dropdown options.
  </action>
  <verify>
Read src/types/database.ts and verify IndustryType includes saas, ecommerce, fintech.
  </verify>
  <done>
IndustryType updated with all agency-relevant industry options.
  </done>
</task>

</tasks>

<verification>
1. `npm run build` passes without errors
2. ClientForm layout matches context decisions
3. Industry field is required with "Other" option support
4. Location field has proper placeholder hint
5. No Primary Contact section (Phase 2 scope)
</verification>

<success_criteria>
- ClientForm has correct 2-column layout for Name/Status and Industry/Location
- Industry is required with searchable dropdown and "Other" custom entry
- Location is optional with format hint placeholder
- Overview is full-width textarea
- CLI-01 requirement is satisfied
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-fixes/01-03-SUMMARY.md`
</output>
