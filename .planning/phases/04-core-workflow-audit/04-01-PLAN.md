---
phase: 04-core-workflow-audit
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/pages/sets/SetsPage.tsx
  - src/pages/requirements/RequirementsPage.tsx
autonomous: true

must_haves:
  truths:
    - "SetsPage list view shows Priority column with P1-P6 badge"
    - "RequirementsPage list view shows Priority column with P1-P6 badge"
    - "Priority badges use consistent colors from getPriorityColor utility"
  artifacts:
    - path: "src/pages/sets/SetsPage.tsx"
      provides: "Priority column in list view table"
      contains: "getPriorityColor"
    - path: "src/pages/requirements/RequirementsPage.tsx"
      provides: "Priority column in list view table"
      contains: "getPriorityColor"
  key_links:
    - from: "src/pages/sets/SetsPage.tsx"
      to: "src/lib/utils.ts"
      via: "import getPriorityColor, calculateEisenhowerPriority"
      pattern: "getPriorityColor"
    - from: "src/pages/requirements/RequirementsPage.tsx"
      to: "src/lib/utils.ts"
      via: "import getPriorityColor, calculateEisenhowerPriority"
      pattern: "getPriorityColor"
---

<objective>
Add Eisenhower Priority column to Sets and Requirements list view grids.

Purpose: Success criteria #1 requires Sets and Requirements to display calculated Eisenhower Priority (1-6). The detail pages already show priority badges, but the list view grids are missing this column.

Output: Both SetsPage and RequirementsPage list views display a Priority column with P1-P6 badges using existing `getPriorityColor` utility.
</objective>

<execution_context>
@/Users/ayazmohammed/.claude/get-shit-done/workflows/execute-plan.md
@/Users/ayazmohammed/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-core-workflow-audit/04-RESEARCH.md

Priority utilities already exist:
- `calculateEisenhowerPriority(importance, urgency)` - returns 1-6
- `getPriorityColor(priority)` - returns Tailwind class string
- `getPriorityLabel(priority)` - returns text label

Both are in `@/lib/utils.ts` (lines 115-172).
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Priority column to SetsPage list view</name>
  <files>src/pages/sets/SetsPage.tsx</files>
  <action>
1. Add imports at top of file:
   ```typescript
   import { getPriorityColor, calculateEisenhowerPriority } from '@/lib/utils'
   ```
   (Add to existing import from '@/lib/utils' which already has getStatusColor)

2. Add Priority TableHead after "Set Name" column in the Table header (around line 229-231):
   ```tsx
   <TableHead>Priority</TableHead>
   ```

3. Add Priority TableCell after the Set Name cell (around line 258, after the display_id badge):
   ```tsx
   <TableCell>
     {(() => {
       const priority = set.priority || calculateEisenhowerPriority(set.importance, set.urgency)
       return (
         <Badge className={getPriorityColor(priority)} variant="outline">
           P{priority}
         </Badge>
       )
     })()}
   </TableCell>
   ```

Note: Using IIFE to calculate priority inline. The `set.priority` comes from database trigger, but we fallback to calculation if missing.
  </action>
  <verify>
Run `npm run build` - should complete without errors.
Visually verify by running dev server and navigating to /sets in list view - Priority column should appear with colored badges.
  </verify>
  <done>SetsPage list view has Priority column showing P1-P6 with color-coded badges between Set Name and Status columns.</done>
</task>

<task type="auto">
  <name>Task 2: Add Priority column to RequirementsPage list view</name>
  <files>src/pages/requirements/RequirementsPage.tsx</files>
  <action>
1. Add imports at top of file:
   ```typescript
   import { getPriorityColor, calculateEisenhowerPriority } from '@/lib/utils'
   ```
   (Add to existing import from '@/lib/utils' which already has formatDate, getInitials)

2. Add Priority TableHead after "Title" column in the Table header (around line 240):
   ```tsx
   <TableHead>Priority</TableHead>
   ```

3. Add Priority TableCell after the Title cell with display_id badge (around line 272, after the closing `</TableCell>` for Title):
   ```tsx
   <TableCell>
     {(() => {
       const priority = req.priority || calculateEisenhowerPriority(req.importance, req.urgency)
       return (
         <Badge className={getPriorityColor(priority)} variant="outline">
           P{priority}
         </Badge>
       )
     })()}
   </TableCell>
   ```

Note: Using same pattern as SetsPage for consistency. Requirements have `importance` and `urgency` fields in the database.
  </action>
  <verify>
Run `npm run build` - should complete without errors.
Visually verify by running dev server and navigating to /requirements in list view - Priority column should appear between Title and Assigned To.
  </verify>
  <done>RequirementsPage list view has Priority column showing P1-P6 with color-coded badges between Title and Assigned To columns.</done>
</task>

</tasks>

<verification>
1. `npm run build` passes without TypeScript errors
2. SetsPage list view shows Priority column with P1-P6 badges
3. RequirementsPage list view shows Priority column with P1-P6 badges
4. Badge colors match the priority color scheme (P1 red, P6 gray, etc.)
</verification>

<success_criteria>
- SetsPage list view table has a Priority column displaying P1-P6 badges
- RequirementsPage list view table has a Priority column displaying P1-P6 badges
- Priority badges use consistent colors via getPriorityColor utility
- Build completes without errors
</success_criteria>

<output>
After completion, create `.planning/phases/04-core-workflow-audit/04-01-SUMMARY.md`
</output>
