---
phase: 02-client-contact-system
plan: 04
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/shared/ViewEditToggle.tsx
  - src/index.css
  - tailwind.config.js
autonomous: false

must_haves:
  truths:
    - "ViewEditToggle component exists and can be imported"
    - "Page backgrounds use IBM Carbon Gray 10 (#f4f4f4)"
    - "Cards/containers use white (#ffffff) backgrounds"
  artifacts:
    - path: "src/components/shared/ViewEditToggle.tsx"
      provides: "Reusable view/edit toggle pattern"
      exports: ["ViewEditToggle"]
    - path: "src/index.css"
      provides: "CSS custom properties for IBM Carbon colors"
      contains: "--carbon-gray-10"
    - path: "tailwind.config.js"
      provides: "Tailwind theme extension for Carbon colors"
      contains: "carbon"
  key_links:
    - from: "src/pages/clients/ClientDetailPage.tsx"
      to: "ViewEditToggle"
      via: "component import (future refactor)"
      pattern: "ViewEditToggle"
---

<objective>
Create reusable UI components and apply IBM Carbon design tokens

Purpose: Extract ViewEditToggle pattern for reuse across detail pages; apply IBM Carbon aesthetic (#f4f4f4 backgrounds, white cards)
Output: Shared component + design tokens ready for use
</objective>

<execution_context>
@/Users/ayazmohammed/.claude/get-shit-done/workflows/execute-plan.md
@/Users/ayazmohammed/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-client-contact-system/02-RESEARCH.md

# Pattern source
@src/pages/clients/ClientDetailPage.tsx
@src/index.css
@tailwind.config.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ViewEditToggle shared component</name>
  <files>src/components/shared/ViewEditToggle.tsx</files>
  <action>
Create a reusable ViewEditToggle component extracted from ClientDetailPage pattern:

```typescript
import { Button } from '@/components/ui/button'
import { Edit, X, Save, Loader2 } from 'lucide-react'

interface ViewEditToggleProps {
  isEditing: boolean
  isSaving: boolean
  onEdit: () => void
  onCancel: () => void
  onSave: () => void
  editLabel?: string
  saveLabel?: string
  cancelLabel?: string
  children: {
    view: React.ReactNode
    edit: React.ReactNode
  }
}

export function ViewEditToggle({
  isEditing,
  isSaving,
  onEdit,
  onCancel,
  onSave,
  editLabel = 'Edit',
  saveLabel = 'Save',
  cancelLabel = 'Cancel',
  children,
}: ViewEditToggleProps) {
  return (
    <div>
      {/* Toggle buttons - right aligned */}
      <div className="flex justify-end gap-2 mb-4">
        {isEditing ? (
          <>
            <Button
              variant="outline"
              size="sm"
              onClick={onCancel}
              disabled={isSaving}
            >
              <X className="mr-2 h-4 w-4" />
              {cancelLabel}
            </Button>
            <Button
              size="sm"
              onClick={onSave}
              disabled={isSaving}
            >
              {isSaving ? (
                <Loader2 className="mr-2 h-4 w-4 animate-spin" />
              ) : (
                <Save className="mr-2 h-4 w-4" />
              )}
              {saveLabel}
            </Button>
          </>
        ) : (
          <Button
            variant="outline"
            size="sm"
            onClick={onEdit}
          >
            <Edit className="mr-2 h-4 w-4" />
            {editLabel}
          </Button>
        )}
      </div>

      {/* Content - switches between view and edit */}
      {isEditing ? children.edit : children.view}
    </div>
  )
}
```

This component:
- Matches existing ClientDetailPage pattern (lines 188-210)
- Provides consistent button styling
- Handles loading state with spinner
- Accepts customizable labels
- Uses render prop pattern for flexibility
  </action>
  <verify>
1. Run `npm run build` - no TypeScript errors
2. Component file exists at src/components/shared/ViewEditToggle.tsx
  </verify>
  <done>ViewEditToggle component created and exportable</done>
</task>

<task type="auto">
  <name>Task 2: Add IBM Carbon design tokens to Tailwind</name>
  <files>tailwind.config.js, src/index.css</files>
  <action>
1. **Update tailwind.config.js** - add Carbon color palette:

In the `extend.colors` section, add:
```javascript
carbon: {
  'gray-10': '#f4f4f4',  // Page backgrounds
  'gray-20': '#e0e0e0',  // Borders, dividers
  'gray-30': '#c6c6c6',  // Disabled backgrounds
  'gray-60': '#6f6f6f',  // Secondary text
  'gray-100': '#161616', // Primary text
  'blue-60': '#0f62fe',  // Primary action
  'blue-70': '#0043ce',  // Primary hover
  'white': '#ffffff',    // Card backgrounds
}
```

2. **Update src/index.css** - add CSS custom properties for theming:

After existing CSS variables in `:root`, add:
```css
/* IBM Carbon Design Tokens */
--carbon-gray-10: #f4f4f4;
--carbon-gray-20: #e0e0e0;
--carbon-gray-100: #161616;
--carbon-blue-60: #0f62fe;
--carbon-white: #ffffff;

/* Semantic aliases */
--page-background: var(--carbon-gray-10);
--card-background: var(--carbon-white);
--border-subtle: var(--carbon-gray-20);
```

3. **Add utility classes** to src/index.css:
```css
/* IBM Carbon Layout Utilities */
.page-carbon {
  background-color: var(--page-background);
  min-height: 100vh;
}

.card-carbon {
  background-color: var(--card-background);
  border-radius: 0.25rem;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}
```

Note: Do NOT apply these classes globally yet. This plan just adds the tokens. Future plans will apply them to specific pages.
  </action>
  <verify>
1. Run `npm run build` - no errors
2. Verify tailwind.config.js has carbon colors
3. Verify src/index.css has CSS custom properties
  </verify>
  <done>IBM Carbon design tokens available in Tailwind and CSS</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
ViewEditToggle component and IBM Carbon design tokens
  </what-built>
  <how-to-verify>
1. Run `npm run dev`
2. Open browser DevTools, go to Elements tab
3. Check that CSS variables are available in :root (search for --carbon)
4. Verify no visual regressions on existing pages (colors should not change yet)
5. Check that `npm run build` passes
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe any issues</resume-signal>
</task>

</tasks>

<verification>
- ViewEditToggle component exists at src/components/shared/ViewEditToggle.tsx
- IBM Carbon colors available in Tailwind (bg-carbon-gray-10, etc.)
- CSS custom properties defined in :root
- No visual regressions on existing pages
- `npm run build` passes
</verification>

<success_criteria>
- ViewEditToggle ready for integration into detail pages
- Design tokens available for Phase 3+ UI work
- No breaking changes to existing styling
</success_criteria>

<output>
After completion, create `.planning/phases/02-client-contact-system/02-04-SUMMARY.md`
</output>
